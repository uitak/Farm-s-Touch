<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<head th:fragment="head" th:replace="~{common/layout2 :: head}"></head>

<body>

<!-- Header START -->
<header th:replace="~{common/layout2 :: #header}"></header>


<!-- Header END -->	

<!-- **************** MAIN CONTENT START **************** -->
<main>

<!-- =======================
Main banner START -->
<section class="pt-0">
	<!-- Background and title -->
	<div class="container-fluid" style="background-image:url(../assets/images/farmstouch/example/mushroom.png); background-position: center left; background-size: cover; height: 25rem;">
		<div class="row" style="margin-bottom: 1.875rem;">
		</div>
	</div>

	<div class="container" style="margin-top: -17.5rem;">
		<!-- Banner title -->
		<div class="row my-2 my-xl-5" > 
			<div class="col-md-8 mx-auto"> 
				<h1 class="text-left text-white" style="margin-bottom: 3.125rem; text-shadow:0.063rem 0.063rem 0.315rem #bdbdbd" >민 간 약 초</h1>
			</div>
		</div>

		<!-- Booking from START -->
		<form th:action="@{/life/herbList}" method="get" class="bg-mode shadow rounded-3 position-relative p-4 pe-md-5 pb-5 pb-md-4 mb-4">
			<div class="row g-4 align-items-center">
				<!-- Location -->
				<div class="col-lg-4">
					<div class="form-control-border form-control-transparent form-fs-md d-flex">
						<!-- Icon -->
						<i class="bi bi-list-task fs-3 me-2 mt-2"></i>
						<!-- Select input -->
						<div class="flex-grow-1">
							<label class="form-label">Filter</label>
							<select class="form-select js-choice" data-search-enabled="false" th:name="searchType">
								<option th:text="명칭" value="cntntsSj" th:selected="${paramMap.searchType}=='cntntsSj'"></option>
								<option th:text="학명" value="bneNm" th:selected="${paramMap.searchType}=='bneNm'"></option>
								<option th:text="민간요법"  value="prvateTherpy" th:selected="${paramMap.searchType}=='prvateTherpy'"></option>
							</select>
						</div>
					</div>
				</div>

				<!-- Guest -->
				<div class="col-lg-8">
					<div class="form-control-border form-control-transparent form-fs-md d-flex">
						<!-- Icon -->
						<i class="bi bi-search fs-3 me-2 mt-2"></i>
						<!-- Dropdown input -->
						<div class="w-100">
							<label class="form-label">Search</label>
							<div class="dropdown guest-selector me-2">
								<input type="text" class="form-guest-selector form-control selection-result" id="searchValue" name="searchValue" th:value="${param.searchValue}" placeholder="내용을 입력하세요" aria-label="Search">
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- Button -->
			<div class="btn-position-md-middle">
				<button class="icon-lg btn btn-round btn-success mb-0" type="submit"><i class="bi bi-search fa-fw"></i></button>
			</div>
		</form>
		<!-- Booking form END -->
	</div>
</section>
<!-- =======================
Main banner START -->



<!-- Alert box START -->
<section class="pt-0">
	<div class="container" style="margin-top: -1.25rem;">
		<div class="alert alert-success alert-dismissible d-flex justify-content-between align-items-center rounded-3 fade show mb-0 mb-0 pe-2" role="alert">
			<div class="d-flex">
				<span class="alert-heading h5 mb-0 me-2"><i class="bi bi-exclamation-octagon-fill"></i></span>
				<span><strong class="alert-heading me-2">약초 주의사항:</strong>팜스터치는 약초에 관한 정보만 제공하므로 채집 및 복용은 전문가와 상의하세요.</span>
			</div>
		</div>
	</div>
</section>
<!-- Alert box END -->


<!-- =======================
Main banner START -->
<section class="pt-0">
	<div class="container">
		<!-- Hero banner START -->
		<div class="row">
			<div class="col-12">
				<!-- Card START -->
				<div class="card card-body bg-success justify-content-center text-center px-4 px-sm-5 pt-6 pt-md-8 pb-8" style="background-image: url(../assets/images/farmstouch/example/bann04.PNG); background-position: center; background-repeat: no-repeat; background-size: cover;">
				</div>
				<!-- Card END -->

			</div>
		</div>
		<!-- Hero banner END -->
	</div>
</section>
<!-- =======================
Main banner END -->




<!-- =======================
Hotel grid START -->
<section class="pt-0">
	<div class="container">
		<div class="row g-4" >
			<th:block th:if="${hlist == null}">
				조회된 글이 없습니다.
			</th:block>
			
			<th:block th:if="${hlist != null}">
				<!-- Card item START -->
				<div th:each="prvateTherpy : ${hlist}" class="col-md-6 col-xl-4">
					<div class="card shadow p-2 pb-0 h-100" style="background-color: #daf0da;">
						<!-- Image 수정 완료-->
						<img th:src="${prvateTherpy.imgUrl}" class="rounded-2" alt="Card image" style="height:17.5rem">

	
						<!-- Card body START -->
						<div class="card-body px-3 pb-0">
							<!-- Rating and cart -->
							<div class="d-flex justify-content-between mb-3">
								<a class="badge bg-dark text-white"><i class="bi fa-fw bi-star-fill me-2 text-warning"></i>[[${prvateTherpy.hbdcNm}]]</a>
								<a th:href="|/life/herbDetails?cntntsNo=${prvateTherpy.cntntsNo}|" class="h6 mb-0 z-index-2"><i class="bi fa-fw bi-search"></i></a>
							</div>
	
							<!-- Title -->
							<h5 class="card-title"><a th:href="|/life/herbDetails?cntntsNo=${prvateTherpy.cntntsNo}|">[[${prvateTherpy.cntntsSj}]]</a></h5>
	
							<!-- List -->
							<ul class="nav nav-divider mb-2 mb-sm-3">
								<li class="nav-item" >[[${prvateTherpy.bneNm}]]</li>
							</ul>
						</div>
						<!-- Card body END -->
					</div>
				</div>
				<!-- Card item END -->
			</th:block>
		</div> <!-- Row END -->
		<!-- Alert box START -->
		<section class="pt-6">
			<div class="container" style="margin-top: -0.25rem; margin-bottom: -2.25rem">
				<div class="alert alert-success alert-dismissible d-flex justify-content-between align-items-center rounded-3 fade show mb-0 mb-0 pe-2" role="alert">
					<div class="d-flex">
						<span class="alert-heading h5 mb-0 me-2"><i class="bi bi-exclamation-octagon-fill"></i></span>
						<span><strong class="alert-heading me-2"> 검색결과 : </strong> 총 [[${hboardCount}]] 개가 발견되었습니다.</span>
					</div>
				</div>
			</div>
		</section>
		<!-- Alert box END -->

		<!-- 페이지 부 -->
		<th:block th:if="${hboardCount > 0}">
			<div class="row">
				<div class="col-12">
					<nav class="mt-4 d-flex justify-content-center" aria-label="navigation">
						<ul class="pagination pagination-primary-soft d-inline-block d-md-flex rounded mb-0">
							<li class="page-item mb-0">
								<button class="page-link" tabindex="-1" th:onclick="movePage(1);">처음</button>
							</li>
							<li class="page-item mb-0">
								<button class="page-link" tabindex="-1" th:onclick="movePage([[${pageInfo.prevPage}]]);"><i class="fa-solid fa-angle-left"></i></button>
							</li>
									
							<th:block th:each="num, status : ${#numbers.sequence(pageInfo.startPage, pageInfo.endPage)}">
								<th:block th:if="${status.current == pageInfo.currentPage}">
									<li class="page-item mb-0 active">
										<button class="page-link" disabled >[[${status.current}]]</button>
									</li>
								</th:block>
								<th:block th:if="${status.current != pageInfo.currentPage}">
									<li class="page-item mb-0">
										<button class="page-link" th:onclick="movePage([[${status.current}]])">[[${status.current}]]</button>
									</li>
								</th:block>
							</th:block>
							<li class="page-item mb-0">
								<button class="page-link" th:onclick="movePage([[${pageInfo.nextPage}]])"><i class="fa-solid fa-angle-right"></i></button>
							</li>
							<li class="page-item mb-0">
								<button class="page-link" th:onclick="movePage([[${pageInfo.maxPage}]])">끝</button>
							</li>
						</ul>
					</nav>
				</div>
			</div>
		</th:block>
		

	</div>
</section>
<!-- =======================
Hotel grid END -->

</main>
<!-- **************** MAIN CONTENT END **************** -->

<!-- footer 시작 -->
	<footer th:replace="~{common/layout2 :: #footer}"></footer>
</body>
</html>

<!-- 이 형태가 되어야 한다 -->
<!-- http://localhost/life/herbList?searchType=prvateTherpy&searchValue=감기&page=2 -->
<!-- 참고 : https://developer.mozilla.org/en-US/docs/Web/API/URLSearchParams/set -->
<script type="text/javascript">
	var url_href = window.location.href; // 현제 페이지 url 따오기 
	var url = new URL(url_href); // URL 객체 선언
	
	function movePage(page){	// 현재 page 숫자를 받아와서
		url.searchParams.set("page", page);	// page=숫자 형태로 만듬
		
		// https://www.w3schools.com/jsref/prop_loc_search.asp
		window.location.search = url.searchParams; // location.search : search property는 물음표(?)를 포함하여 URL의 쿼리 문자열 부분을 반환
	};
</script>